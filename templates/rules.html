{% extends "layout.html" %}
{% block content %}

    <head>
        <script src="{{ url_for('static', filename='js/rules.js') }}"></script>
        <link rel="stylesheet" href="{{url_for('static', filename='css/rules.css')}}">

    </head>

    <h1>{{ title }}</h1>

    <div class="show_progress">
        <div class="progress_bar">
            <div class="progress_tracker">
                {% for step in range(1, 10) %}
                    {% if step <= (rule_id - 1) %}
                        <div class="step completed">
                            <span class="icon">✔</span>
                        </div>
                    {% elif step == rule_id %}
                        <div class="step now">
                            <span class="icon">I</span>
                        </div>
                    {% else %}
                        <div class="step">
                            <span class="icon"></span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="progress_bar">
            <div class="progress_tracker">
                {% for step in range(1, 10) %}
                    <div class="progress_text">Step {{ step }}</div>
                {% endfor %}
            </div>
        </div>
    </div>


    {% if rule_id == 1 %}
                    
        <p>In a card game played with a shuffled pack of 54 cards divided among three players, each receiving 17 cards with 3 leftover cards placed face down on the table, players initially examine their own cards to strategize.</p>

        <button id="startTutorial1" class='btn btn-success'>Start Tutorial</button>
        <button id="learnAgain1" class='btn btn-success' style="display:none;">Learn Again</button>


        <div class="game-images">
            <div class="player player1">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Peasant Player" class="img-fluid game-image" id="player1-peasant">
                <div class="card-stack" id="player1-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/blue_back copy.png') }}" alt="Blue Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class='cards_count'>17 cards</p>
            </div>
            <div class="player cards1">
                <div class="card-stack" id="player4-cards">
                    {% for i in range(3) %}
                    <img src="{{ url_for('static', filename='img/cards/yellow_back copy.png') }}" alt="Yellow Card" class="img-fluid card-image3">
                    {% endfor %}
                </div>
                <p class='cards_count'>3 cards</p>
            </div>

            <div class="player player2">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Peasant Player" class="img-fluid game-image">
                <div class="card-stack" id="player2-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/purple_back copy.png') }}" alt="Purple Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class='cards_count'>17 cards</p>
            </div>
            <div class="player player3" id="landlordPlayer">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Landlord Player" class="img-fluid game-image">
                <div class="card-stack" id="player3-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/green_back copy.png') }}" alt="Green Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class='cards_count'>17 cards</p>
            </div>
        </div>



    {% elif rule_id == 2 %}
        <p><strong>Bidding for the "landlord" (地主) role:</strong></p>
            <ol>
            <li>Start with a random player (or based on predetermined rules)</li>
            <li>Players bid on their willingness to take the risk</li>
            <li>The "landlord" is the player who bids the highest and takes the 3 leftover cards.</li>
            <li>The "peasants" are the other 2 players.</li>
            </ol>


        <button id="startTutorial2" class='btn btn-success'>Start Tutorial</button>
        <button id="learnAgain2" class='btn btn-success' style="display:none;">Learn Again</button>

        <div class="game-images">
            <div class="player player1">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Peasant Player" class="img-fluid game-image">
                <div class="card-stack" id="player1-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/blue_back copy.png') }}" alt="Blue Card" class="img-fluid card-image">
                    {% endfor %}
                </div>

                <p class="caption">I bid</p>
            </div>
            <div class="player cards1">
                <div class="card-stack" id="player4-cards">
                    {% for i in range(3) %}
                    <img src="{{ url_for('static', filename='img/cards/yellow_back copy.png') }}" alt="Yellow Card" class="img-fluid card-image3">
                    {% endfor %}
                </div>
            </div>
            <div class="player player2">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Peasant Player" class="img-fluid game-image">
                <div class="card-stack" id="player2-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/gray_back copy.png') }}" alt="Gray Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class="caption">No bid</p>
            </div>
            <div class="player player3" id="landlordPlayer">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Landlord Player" class="img-fluid game-image">
                <div class="card-stack" id="player3-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/green_back copy.png') }}" alt="Green Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class="caption">I bid higher!</p>
            </div>
        </div>


    {% elif rule_id == 3 %}
        <p>The objective of the game is to be the first player to have no cards left. The landlord wins by removing all their cards first. The peasants win if one of them removes all their cards first.</p>


        <button id="startScenario1" class='btn btn-success' data-scenario="1">Start Scenario 1</button>
        <button id="startScenario2" class='btn btn-success' data-scenario="2">Start Scenario 2</button>



        <div class="game-images">
            <div class="player player1">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Peasant Player" class="img-fluid game-image" id="player1-peasant">
                <div class="card-stack" id="player1-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/blue_back copy.png') }}" alt="Blue Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class='cards_count'>17 cards</p>
                <p class="caption"></p>
            </div>

            <div class="player player2">
                <img src="{{ url_for('static', filename='img/peasant.png') }}" alt="Peasant Player" class="img-fluid game-image">
                <div class="card-stack" id="player2-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/purple_back copy.png') }}" alt="Purple Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class='cards_count'>17 cards</p>
                <p class="caption"></p>
            </div>
            <div class="player player3" id="landlordPlayer">
                <img src="{{ url_for('static', filename='img/landlord.png') }}" alt="Landlord Player" class="img-fluid game-image">
                <div class="card-stack" id="player3-cards">
                    {% for i in range(17) %}
                    <img src="{{ url_for('static', filename='img/cards/green_back copy.png') }}" alt="Green Card" class="img-fluid card-image">
                    {% endfor %}
                </div>
                <p class='cards_count'>17 cards</p>
                <p class="caption"></p>
            </div>
        </div>





    {% else %}
        <p>This rule does not exist.</p>
    {% endif %}

    <div class="nav-arrows-container">
        {% if rule_id > 1 %}
            <a href="{{ url_for('decrement_progress') }}" class="left-arrow">←</a>
        {% endif %}
        <a href="{{ url_for('increment_progress') }}" class="right-arrow">→</a>
    </div>
    
{% endblock %}
